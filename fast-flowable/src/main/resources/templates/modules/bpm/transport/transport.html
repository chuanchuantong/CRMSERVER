<#include "/common/include.html"/>
<@pageTheme mark="${config.optimize()?string('true', 'false')}">
<@header title="运输列表">
</@header>
<@search fromId="transport-form">
<div class="select-list">
    <ul>
        <li><@ctx.i18n text = "订单号"/>：<input type="text" name="saleCode"/></li>
        <li><@ctx.i18n text = "销售员"/>：<input type="text" name="saleUserid"/></li>
        <li><@ctx.i18n text = "销售订单编号"/>：<input type="text" name="saleOrderNumber"/></li>
        <li><@ctx.i18n text = "车辆识别号"/>：<input type="text" name="outCarVin"/></li>
        <li><@ctx.i18n text = "车型"/>：<input type="text" name="outCarVehicle"/></li>
        <li>
            <@ctx.i18n text = "提车地点"/>：
            <select name="transportTakeCarPlace" class="form-control">
                <option value=""><@ctx.i18n text = "所有"/></option>
            <#list dict.getType('sys_crm_takecarplace')>
                <#items as d>
                    <#if d.status =='0' >
                        <option value="${d.dictValue}" text="${d.dictLabel}"><@ctx.i18n text = "${d.dictLabel}"/></option>
                    </#if>
                </#items>
            </#list>
            </select>
        </li>
        <li><@ctx.i18n text = "选择同事"/>：<input type="text" name="transportSelectColleague"/></li>
        <li><@ctx.i18n text = "提车地址"/>：<input type="text" name="transportTakeCarAddress"/></li>
        <li><@ctx.i18n text = "提车电话"/>：<input type="text" name="transportTakeCarPhone"/></li>
        <li>
            <@ctx.i18n text = "送车地点"/>：
            <select name="transportGiveCarPlace" class="form-control">
                <option value=""><@ctx.i18n text = "所有"/></option>
            <#list dict.getType('sys_crm_takecarplace')>
                <#items as d>
                    <#if d.status =='0' >
                        <option value="${d.dictValue}" text="${d.dictLabel}"><@ctx.i18n text = "${d.dictLabel}"/></option>
                    </#if>
                </#items>
            </#list>
            </select>
        </li>
        <li><@ctx.i18n text = "选择同事"/>：<input type="text" name="transportGiveSelectColleague"/></li>
        <li><@ctx.i18n text = "送车地址"/>：<input type="text" name="transportGiveCarAddress"/></li>
        <li><@ctx.i18n text = "送车电话"/>：<input type="text" name="transportGiveCarPhone"/></li>
        <li>
            <@ctx.i18n text = "运输状态"/>：
            <select name="approvalCurrentStatus" class="form-control">
                <option value=""><@ctx.i18n text = "所有"/></option>
            <#list dict.getType('sys_crm_transportstatus')>
                <#items as d>
                    <#if d.status =='0' >
                        <option value="${d.dictValue}" text="${d.dictLabel}"><@ctx.i18n text = "${d.dictLabel}"/></option>
                    </#if>
                </#items>
            </#list>
            </select>
        </li>
        <li class="select-time">
            计划提车时间：
            <input type="text" class="time-input" placeholder="开始时间" name="beginApprovalPlanTakeCarTime"/>
            <span>-</span>
            <input type="text" class="time-input" placeholder="结束时间" name="endApprovalPlanTakeCarTime"/>
        </li>
        <li class="select-time">
            预计到达日：
            <input type="text" class="time-input" placeholder="开始时间" name="beginApprovalPlanArriveTime"/>
            <span>-</span>
            <input type="text" class="time-input" placeholder="结束时间" name="endApprovalPlanArriveTime"/>
        </li>
        <li><@ctx.i18n text = "订单ID"/>：<input type="text" name="approvalOrderid"/></li>
        <li><@ctx.i18n text = "调度费用"/>：<input type="text" name="approvalCentralDispatchFee"/></li>
        <li><@ctx.i18n text = "运输公司名字"/>：<input type="text" name="transportCompanyName"/></li>
        <li><@ctx.i18n text = "运输公司支票接收地址"/>：<input type="text" name="transportCompanyCheckAddress"/></li>
        <li>
            <@ctx.i18n text = "邮寄方式"/>：
            <select name="transportMail" class="form-control">
                <option value=""><@ctx.i18n text = "所有"/></option>
            <#list dict.getType('sys_crm_expresscompany')>
                <#items as d>
                    <#if d.status =='0' >
                        <option value="${d.dictValue}" text="${d.dictLabel}"><@ctx.i18n text = "${d.dictLabel}"/></option>
                    </#if>
                </#items>
            </#list>
            </select>
        </li>
        <li class="select-time">
            付款日期：
            <input type="text" class="time-input" placeholder="开始时间" name="beginCashierPayTime"/>
            <span>-</span>
            <input type="text" class="time-input" placeholder="结束时间" name="endCashierPayTime"/>
        </li>
        <li>
            <@ctx.i18n text = "汇款方式"/>：
            <select name="cashierPayMethod" class="form-control">
                <option value=""><@ctx.i18n text = "所有"/></option>
            <#list dict.getType('sys_crm_remitmoney')>
                <#items as d>
                    <#if d.status =='0' >
                        <option value="${d.dictValue}" text="${d.dictLabel}"><@ctx.i18n text = "${d.dictLabel}"/></option>
                    </#if>
                </#items>
            </#list>
            </select>
        </li>
        <li><@ctx.i18n text = "证明"/>：<input type="text" name="cashierPayProofFilepath"/></li>
        <li><@ctx.i18n text = "收据单号"/>：<input type="text" name="cashierReceiptNumber"/></li>
        <li><@ctx.i18n text = "备注"/>：<input type="text" name="cashierPayMemo"/></li>
        <li>
            <@ctx.i18n text = "支付结果"/>：
            <select name="confirmPayMethod" class="form-control">
                <option value=""><@ctx.i18n text = "所有"/></option>
            <#list dict.getType('sys_yes_no')>
                <#items as d>
                    <#if d.status =='0' >
                        <option value="${d.dictValue}" text="${d.dictLabel}"><@ctx.i18n text = "${d.dictLabel}"/></option>
                    </#if>
                </#items>
            </#list>
            </select>
        </li>
        <li><@ctx.i18n text = "金额"/>：<input type="text" name="confirmPayAmount"/></li>
        <li><@ctx.i18n text = "付款总额"/>：<input type="text" name="confirmPaySum"/></li>
        <li><@ctx.i18n text = "运输总费用"/>：<input type="text" name="transportTotalCost"/></li>
        <li>
            <a class="btn btn-primary btn-rounded btn-sm" onclick="$.table.search()"><i class="fa fa-search"></i>&nbsp;&nbsp;<@ctx.i18n text = "查询"/></a>
            <a class="btn btn-warning btn-rounded btn-sm" onclick="opt.form.reset()"><i class="fa fa-refresh"></i>&nbsp;<@ctx.i18n text = "重置"/></a>
        </li>
    </ul>
</div>
</@search>
<@table tableId="bootstrap-table">
    <@shiro.hasPermission name="bpm:transport:add">
        <a class="btn btn-success" onclick="opt.operate.add()"><i class="fa fa-plus"></i>&nbsp;<@ctx.i18n text = "新增"/></a>
    </@shiro.hasPermission>
    <@shiro.hasPermission name="bpm:transport:edit">
        <a class="btn btn-primary single disabled" onclick="opt.operate.edit()"><i class="fa fa-pencil-square-o"></i>&nbsp;<@ctx.i18n text = "修改"/></a>
    </@shiro.hasPermission>
    <@shiro.hasPermission name="bpm:transport:del">
        <a class="btn btn-danger multiple disabled" onclick="opt.operate.delAll()"><i class="fa fa-remove"></i> <@ctx.i18n text = "删除"/></a>
    </@shiro.hasPermission>
</@table>
<@footer>
<script>
    var editFlag = "${permission.hasPermi("bpm:transport:edit")}";
    var listFlag = "${permission.hasPermi("bpm:transport:add")}";
    var delFlag = "${permission.hasPermi("bpm:transport:del")}";
    var visible = ${permission.isPermitteds("bpm:transport:edit,bpm:transport:del,bpm:transport:add")?string('true', 'false')};
   var transportTakeCarPlaceDatas = ${dict.getDictListJson('sys_crm_takecarplace')};
   var transportGiveCarPlaceDatas = ${dict.getDictListJson('sys_crm_takecarplace')};
   var approvalCurrentStatusDatas = ${dict.getDictListJson('sys_crm_transportstatus')};
   var transportMailDatas = ${dict.getDictListJson('sys_crm_expresscompany')};
   var cashierPayMethodDatas = ${dict.getDictListJson('sys_crm_remitmoney')};
   var confirmPayMethodDatas = ${dict.getDictListJson('sys_yes_no')};
    var prefix = baseURL + "bpm/transport";

    $(function() {
        var options = {
            url: prefix + "/list",
            addUrl: prefix + "/add",
            editUrl: prefix + "/edit/{id}",
            delUrl: prefix + "/del",
            modalName: "运输",
            uniqueId:    'id'/* 唯一ID */                                                                                                 ,
            columns: [
                         {title: $.i18n.prop("序号"), width: 5, align: "center", formatter: function (value, row, index) {
                                    return $.table.serialNumber(index);
                         }}
                        ,{field : 'id',title : '<@ctx.i18n text = "主键"/>',visible: false}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
                        ,{field : 'saleCode',title : '<@ctx.i18n text = "订单号"/>'}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
                        ,{field : 'saleUserid',title : '<@ctx.i18n text = "销售员"/>'}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
                        ,{field : 'saleOrderNumber',title : '<@ctx.i18n text = "销售订单编号"/>'}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
                        ,{field : 'outCarVin',title : '<@ctx.i18n text = "车辆识别号"/>'}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
                        ,{field : 'outCarVehicle',title : '<@ctx.i18n text = "车型"/>'}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
                        ,{field : 'transportTakeCarPlace',title : '<@ctx.i18n text = "提车地点"/>',formatter: function(value, row, index) {
                                return $.table.selectDictLabels(transportTakeCarPlaceDatas, value);
                        }}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
                        ,{field : 'transportSelectColleague',title : '<@ctx.i18n text = "选择同事"/>'}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
                        ,{field : 'transportTakeCarAddress',title : '<@ctx.i18n text = "提车地址"/>'}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
                        ,{field : 'transportTakeCarPhone',title : '<@ctx.i18n text = "提车电话"/>'}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
                        ,{field : 'transportGiveCarPlace',title : '<@ctx.i18n text = "送车地点"/>',formatter: function(value, row, index) {
                                return $.table.selectDictLabels(transportGiveCarPlaceDatas, value);
                        }}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
                        ,{field : 'transportGiveSelectColleague',title : '<@ctx.i18n text = "选择同事"/>'}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
                        ,{field : 'transportGiveCarAddress',title : '<@ctx.i18n text = "送车地址"/>'}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
                        ,{field : 'transportGiveCarPhone',title : '<@ctx.i18n text = "送车电话"/>'}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
                        ,{field : 'approvalCurrentStatus',title : '<@ctx.i18n text = "运输状态"/>',formatter: function(value, row, index) {
                                return $.table.selectDictLabels(approvalCurrentStatusDatas, value);
                        }}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
                        ,{field : 'approvalPlanTakeCarTime',title : '<@ctx.i18n text = "计划提车时间"/>'}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
                        ,{field : 'approvalPlanArriveTime',title : '<@ctx.i18n text = "预计到达日"/>'}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
                        ,{field : 'approvalOrderid',title : '<@ctx.i18n text = "订单ID"/>'}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
                        ,{field : 'approvalCentralDispatchFee',title : '<@ctx.i18n text = "调度费用"/>'}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
                        ,{field : 'transportCompanyName',title : '<@ctx.i18n text = "运输公司名字"/>'}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
                        ,{field : 'transportCompanyCheckAddress',title : '<@ctx.i18n text = "运输公司支票接收地址"/>'}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
                        ,{field : 'transportMail',title : '<@ctx.i18n text = "邮寄方式"/>',formatter: function(value, row, index) {
                                return $.table.selectDictLabels(transportMailDatas, value);
                        }}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
                        ,{field : 'cashierPayTime',title : '<@ctx.i18n text = "付款日期"/>'}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
                        ,{field : 'cashierPayMethod',title : '<@ctx.i18n text = "汇款方式"/>',formatter: function(value, row, index) {
                                return $.table.selectDictLabels(cashierPayMethodDatas, value);
                        }}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
                        ,{field : 'cashierPayProofFilepath',title : '<@ctx.i18n text = "证明"/>'}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
                        ,{field : 'cashierReceiptNumber',title : '<@ctx.i18n text = "收据单号"/>'}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
                        ,{field : 'cashierPayMemo',title : '<@ctx.i18n text = "备注"/>'}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
                        ,{field : 'confirmPayMethod',title : '<@ctx.i18n text = "支付结果"/>',formatter: function(value, row, index) {
                                return $.table.selectDictLabels(confirmPayMethodDatas, value);
                        }}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
                        ,{field : 'confirmPayAmount',title : '<@ctx.i18n text = "金额"/>'}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
                        ,{field : 'confirmPaySum',title : '<@ctx.i18n text = "付款总额"/>'}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
                        ,{field : 'transportTotalCost',title : '<@ctx.i18n text = "运输总费用"/>'}                             
                        ,{title:"<@ctx.i18n text = "操作"/>",align: 'left',visible:visible,formatter: function(value, row, index) {
                            var actions = [];
                            actions.push('<a class="btn btn-success btn-xs ' + editFlag + '" href="javascript:void(0)" onclick="opt.operate.edit(\'' + row.id + '\')"><i class="fa fa-edit"></i>编辑</a> ');
                            actions.push('<a class="btn btn-danger btn-xs ' + delFlag + '" href="javascript:void(0)" onclick="opt.operate.del(\'' + row.id + '\')"><i class="fa fa-remove"></i>删除</a>');
                            return actions.join('');
                        }}
                    ]
            };
         $.table.init(options);
     });
</script>
</@footer>
</@pageTheme>